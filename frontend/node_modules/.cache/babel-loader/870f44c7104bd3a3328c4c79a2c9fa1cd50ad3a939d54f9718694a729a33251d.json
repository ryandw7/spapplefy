{"ast":null,"code":"import { SPOTIFY_CLIENT_ID, SPOTIFY_REDIRECT_URI } from \"../globals\";\n//Return url to generate access token with spotify\nexport const spotifyAuthFlow = () => {\n  const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\n  const RESPONSE_TYPE = \"token\";\n  const SCOPE = 'playlist-modify-public playlist-modify-private';\n  let url = '';\n  url += AUTH_ENDPOINT;\n  url += '?client_id=' + SPOTIFY_CLIENT_ID;\n  url += '&redirect_uri=' + SPOTIFY_REDIRECT_URI;\n  url += '&response_type=' + RESPONSE_TYPE;\n  url += '&scope=' + SCOPE;\n  return url;\n};\n\n//hash access token from url after authFlow has successfully been completed\nexport const hashSpotifyToken = () => {\n  const hash = window.location.hash;\n  let accessToken = window.sessionStorage.getItem(\"token\");\n  if (!accessToken && hash) {\n    accessToken = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n    window.location.hash = \"\";\n    window.sessionStorage.setItem(\"spotify_token\", accessToken);\n    window.sessionStorage.setItem(\"authorized\", true);\n  }\n};\n\n//Return data from fetching user info after access token has been retrieved\nexport const fetchSpotifyUser = async () => {\n  try {\n    const res = await fetch('https://api.spotify.com/v1/me?access_token=' + window.sessionStorage.getItem(\"token\"));\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    console.log(`ERROR: ${err}, Unable to retrieve ID`);\n  }\n};","map":{"version":3,"names":["SPOTIFY_CLIENT_ID","SPOTIFY_REDIRECT_URI","spotifyAuthFlow","AUTH_ENDPOINT","RESPONSE_TYPE","SCOPE","url","hashSpotifyToken","hash","window","location","accessToken","sessionStorage","getItem","substring","split","find","elem","startsWith","setItem","fetchSpotifyUser","res","fetch","data","json","err","console","log"],"sources":["/home/ryan_wilson/spapplefy/src/api_utils/spotifyUtils.js"],"sourcesContent":["import { SPOTIFY_CLIENT_ID, SPOTIFY_REDIRECT_URI } from \"../globals\";\n//Return url to generate access token with spotify\nexport const spotifyAuthFlow = () => {\n    const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\n    const RESPONSE_TYPE = \"token\";\n    const SCOPE = 'playlist-modify-public playlist-modify-private'\n    let url = '';\n    url += AUTH_ENDPOINT;\n    url += '?client_id=' + SPOTIFY_CLIENT_ID;\n    url += '&redirect_uri=' + SPOTIFY_REDIRECT_URI;\n    url += '&response_type=' + RESPONSE_TYPE;\n    url += '&scope=' + SCOPE;\n    return url;\n}\n\n//hash access token from url after authFlow has successfully been completed\nexport const hashSpotifyToken = () => {\n\n    const hash = window.location.hash;\n    let accessToken = window.sessionStorage.getItem(\"token\");\n    if (!accessToken && hash) {\n        accessToken = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n        window.location.hash = \"\";\n        window.sessionStorage.setItem(\"spotify_token\", accessToken);\n        window.sessionStorage.setItem(\"authorized\", true);\n\n    }\n}\n\n//Return data from fetching user info after access token has been retrieved\nexport const fetchSpotifyUser = async () => {\n\n    try {\n        const res = await fetch('https://api.spotify.com/v1/me?access_token=' + window.sessionStorage.getItem(\"token\"))\n        const data = await res.json();\n        return data;\n    } catch (err) {\n        console.log(`ERROR: ${err}, Unable to retrieve ID`);\n    }\n\n}\n"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,oBAAoB,QAAQ,YAAY;AACpE;AACA,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EACjC,MAAMC,aAAa,GAAG,wCAAwC;EAC9D,MAAMC,aAAa,GAAG,OAAO;EAC7B,MAAMC,KAAK,GAAG,gDAAgD;EAC9D,IAAIC,GAAG,GAAG,EAAE;EACZA,GAAG,IAAIH,aAAa;EACpBG,GAAG,IAAI,aAAa,GAAGN,iBAAiB;EACxCM,GAAG,IAAI,gBAAgB,GAAGL,oBAAoB;EAC9CK,GAAG,IAAI,iBAAiB,GAAGF,aAAa;EACxCE,GAAG,IAAI,SAAS,GAAGD,KAAK;EACxB,OAAOC,GAAG;AACd,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAElC,MAAMC,IAAI,GAAGC,MAAM,CAACC,QAAQ,CAACF,IAAI;EACjC,IAAIG,WAAW,GAAGF,MAAM,CAACG,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EACxD,IAAI,CAACF,WAAW,IAAIH,IAAI,EAAE;IACtBG,WAAW,GAAGH,IAAI,CAACM,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC,CAACH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACtGN,MAAM,CAACC,QAAQ,CAACF,IAAI,GAAG,EAAE;IACzBC,MAAM,CAACG,cAAc,CAACO,OAAO,CAAC,eAAe,EAAER,WAAW,CAAC;IAC3DF,MAAM,CAACG,cAAc,CAACO,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;EAErD;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAExC,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,6CAA6C,GAAGb,MAAM,CAACG,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;IAC/G,MAAMU,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;IAC7B,OAAOD,IAAI;EACf,CAAC,CAAC,OAAOE,GAAG,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,UAAUF,GAAG,yBAAyB,CAAC;EACvD;AAEJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}